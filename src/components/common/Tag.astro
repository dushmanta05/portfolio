---
interface Props {
  tag: string;
}

const { tag } = Astro.props;

function getTagColorIndex(tag: string): number {
  let hash = 0;
  for (let i = 0; i < tag.length; i++) {
    const char = tag.charCodeAt(i);
    hash = (hash << 5) - hash + char;
    hash = hash & hash;
  }
  return Math.abs(hash) % 7;
}
---

<span class={`blog-tag tag-color-${getTagColorIndex(tag)}`}>
  {tag}
</span>

<style>
  .blog-tag {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
  }

  /* Tag color system - very light backgrounds */
  .tag-color-0 {
    background-color: rgba(59, 130, 246, 0.1); /* Blue */
    color: rgb(30, 64, 175);
  }

  .tag-color-1 {
    background-color: rgba(16, 185, 129, 0.1); /* Green */
    color: rgb(5, 150, 105);
  }

  .tag-color-2 {
    background-color: rgba(245, 158, 11, 0.1); /* Amber */
    color: rgb(180, 83, 9);
  }

  .tag-color-3 {
    background-color: rgba(239, 68, 68, 0.1); /* Red */
    color: rgb(185, 28, 28);
  }

  .tag-color-4 {
    background-color: rgba(168, 85, 247, 0.1); /* Purple */
    color: rgb(124, 58, 237);
  }

  .tag-color-5 {
    background-color: rgba(236, 72, 153, 0.1); /* Pink */
    color: rgb(190, 24, 93);
  }

  .tag-color-6 {
    background-color: rgba(6, 182, 212, 0.1); /* Cyan */
    color: rgb(8, 145, 178);
  }

  /* Dark mode tag colors */
  :global(.theme-dark) .tag-color-0 {
    background-color: rgba(59, 130, 246, 0.15);
    color: rgb(147, 197, 253);
  }

  :global(.theme-dark) .tag-color-1 {
    background-color: rgba(16, 185, 129, 0.15);
    color: rgb(110, 231, 183);
  }

  :global(.theme-dark) .tag-color-2 {
    background-color: rgba(245, 158, 11, 0.15);
    color: rgb(251, 191, 36);
  }

  :global(.theme-dark) .tag-color-3 {
    background-color: rgba(239, 68, 68, 0.15);
    color: rgb(248, 113, 113);
  }

  :global(.theme-dark) .tag-color-4 {
    background-color: rgba(168, 85, 247, 0.15);
    color: rgb(196, 181, 253);
  }

  :global(.theme-dark) .tag-color-5 {
    background-color: rgba(236, 72, 153, 0.15);
    color: rgb(244, 114, 182);
  }

  :global(.theme-dark) .tag-color-6 {
    background-color: rgba(6, 182, 212, 0.15);
    color: rgb(103, 232, 249);
  }
</style>
