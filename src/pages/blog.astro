---
import { getCollection } from 'astro:content';

import BaseLayout from '../layouts/BaseLayout.astro';
import ContactCTA from '../components/ContactCTA.astro';
import BlogPreview from '../components/BlogPreview.astro';
import PageHeader from '../components/PageHeader.astro';
import Grid from '../components/Grid.astro';

const blogs = (await getCollection('blog')).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf()
);
---

<BaseLayout
  title='Tech Blog | Dushmanta'
  description="Read Dushmanta's technical insights, tutorials, and experiences from the world of development"
>
  <div class='stack gap-20'>
    <main class='wrapper stack gap-12'>
      <PageHeader
        title='Tech Blog'
        subtitle="Dive into my technical journey through detailed articles, tutorials, and insights. Here I share what I've learned, problems I've solved, and discoveries that have shaped my development path."
        align='start'
      />

      <section class='blog-grid'>
        <Grid variant='offset'>
          {
            blogs.map((blog) => (
              <li class='blog-item'>
                <BlogPreview project={blog} />
              </li>
            ))
          }
        </Grid>
      </section>
    </main>
    <ContactCTA />
  </div>
</BaseLayout>

<style>
  .blog-grid {
    margin-top: 1rem;
  }

  .blog-item {
    transition: transform 0.3s ease;
  }

  .blog-item:hover {
    transform: translateY(-4px);
  }
</style>
